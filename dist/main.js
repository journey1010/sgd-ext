(()=>{let e=["asu","dir","correo","coUsuario","sDeAsuM","deAsu","deObsDoc","busAsunto","sBuscAsunto","coUsuariolabel","dePass","txtBusDependencia","deSigla","deCortaDepen"];function t(e){let t=document.getElementById(e);t&&(t.style.textTransform="none")}async function n(e){if(e&&"1"!==e.dataset.filled)try{e.disabled=!0;let t=await fetch("https://sgd-control.regionloreto.gob.pe/api/dependencia/last/co_dependencia",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw Error(`HTTP ${t.status}`);let n=await t.json(),a="string"==typeof n?n:Object.values(n)[0];null!=a&&""!==String(a).trim()&&(e.value=a,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e.dataset.filled="1")}catch(e){console.error("Error al obtener coDependencia:",e)}finally{e.disabled=!1}}let a="";function o(){let e=document.getElementById("dependenciaBean");if(!e)return!1;let t=e.querySelector("#deDepenPadre"),n=e.querySelector("#coNivel");if(t&&n&&!t.dataset.watched){t.dataset.watched="1";let e=t.value;async function o(){let e=t.value.trim();if(e)try{n.disabled=!0;let t=`https://sgd-control.regionloreto.gob.pe/api/dependencia/nivel/father?des_dep=${encodeURIComponent(e)}`,o=await fetch(t,{headers:{Accept:"application/json"}});if(!o.ok)throw Error(`HTTP ${o.status}`);let r=await o.json(),i="";"number"==typeof r||"string"==typeof r?i=r:r&&"object"==typeof r&&(i=r.nivel??r.coNivel??Object.values(r)[0]??""),null!=i&&""!==String(i).trim()&&(n.value=i,a=i,["input","change"].forEach(e=>n.dispatchEvent(new Event(e,{bubbles:!0}))),console.log(`\u{2705} coNivel autocompletado con: ${i}`))}catch(e){console.error("❌ Error al obtener coNivel:",e)}finally{n.disabled=!1}}return t.addEventListener("change",()=>{e=t.value,o()}),setInterval(()=>{t.value!==e&&(e=t.value,o())},500),a&&!n.value&&(n.value=a,["input","change"].forEach(e=>n.dispatchEvent(new Event(e,{bubbles:!0})))),!0}return!1}function r(){console.log("Extensión iniciada."),e.forEach(t),new MutationObserver(()=>{e.forEach(t)}).observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("paste",function(e){if(e.defaultPrevented){let t=(e.clipboardData||window.clipboardData).getData("text");if(t){let e=document.activeElement;e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)&&(e.value+=t)}}e.stopPropagation()},!0),document.addEventListener("keydown",function(e){e.ctrlKey&&"v"===e.key&&e.stopPropagation()},!0),new MutationObserver(()=>{let e=document.querySelector("input#coDependencia");e&&!e.dataset.watched&&(e.dataset.watched="1",n(e))}).observe(document.body,{childList:!0,subtree:!0}),o()||new MutationObserver(o).observe(document.body,{childList:!0,subtree:!0}),window.PF&&"function"==typeof $&&$(document).on("pfAjaxComplete",o)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()})();
//# sourceMappingURL=main.js.map
