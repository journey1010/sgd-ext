(()=>{let e=["asu","dir","correo","coUsuario","sDeAsuM","deAsu","deObsDoc","busAsunto","sBuscAsunto","coUsuariolabel","dePass","txtBusDependencia","deSigla","deCortaDepen"];function t(e){let t=document.getElementById(e);t&&(t.style.textTransform="none")}async function o(e){if(e&&"1"!==e.dataset.filled)try{e.disabled=!0;let t=await fetch("https://sgd-control.regionloreto.gob.pe/api/dependencia/last/co_dependencia",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw Error(`HTTP ${t.status}`);let o=await t.json(),n="string"==typeof o?o:Object.values(o)[0];null!=n&&""!==String(n).trim()&&(e.value=n,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e.dataset.filled="1")}catch(e){console.error("Error al obtener coDependencia:",e)}finally{e.disabled=!1}}let n="";function a(){let e=document.getElementById("dependenciaBean");if(!e)return!1;let t=e.querySelector("#deDepenPadre"),o=e.querySelector("#coNivel");if(t&&o&&!t.dataset.watched){t.dataset.watched="1";let e=t.value;async function a(){let e=t.value.trim();if(e)try{o.disabled=!0;let t=`https://sgd-control.regionloreto.gob.pe/api/dependencia/nivel/father?des_dep=${encodeURIComponent(e)}`,a=await fetch(t,{headers:{Accept:"application/json"}});if(!a.ok)throw Error(`HTTP ${a.status}`);let r=await a.json(),d="";"number"==typeof r||"string"==typeof r?d=r:r&&"object"==typeof r&&(d=r.nivel??r.coNivel??Object.values(r)[0]??""),null!=d&&""!==String(d).trim()&&(o.value=d,n=d,["input","change"].forEach(e=>o.dispatchEvent(new Event(e,{bubbles:!0}))),console.log(`\u{2705} coNivel autocompletado con: ${d}`))}catch(e){console.error("❌ Error al obtener coNivel:",e)}finally{o.disabled=!1}}return t.addEventListener("change",()=>{e=t.value,a()}),setInterval(()=>{t.value!==e&&(e=t.value,a())},500),n&&!o.value&&(o.value=n,["input","change"].forEach(e=>o.dispatchEvent(new Event(e,{bubbles:!0})))),!0}return!1}let r="#tlbLocalConsDocExtModal > tbody";async function d(){try{let e=await fetch("https://sgd-control.regionloreto.gob.pe/api/dependencia/local");if(!e.ok)throw Error(`Error en la solicitud: ${e.status} - ${e.statusText}`);return await e.json()}catch(e){return console.error("Error: No se pudo obtener la data del endpoint.",e),null}}let l=`
    <tr tabindex="0" class="ui-datatable-odd row_selected">
        <td width="450">[TODOS]</td>
        <td style="display:none"></td>
    </tr>
`;function c(){console.log("Extensión iniciada."),e.forEach(t),new MutationObserver(()=>{e.forEach(t)}).observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("paste",function(e){if(e.defaultPrevented){let t=(e.clipboardData||window.clipboardData).getData("text");if(t){let e=document.activeElement;e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)&&(e.value+=t)}}e.stopPropagation()},!0),document.addEventListener("keydown",function(e){e.ctrlKey&&"v"===e.key&&e.stopPropagation()},!0),new MutationObserver(()=>{let e=document.querySelector("input#coDependencia");e&&!e.dataset.watched&&(e.dataset.watched="1",o(e))}).observe(document.body,{childList:!0,subtree:!0}),a()||new MutationObserver(a).observe(document.body,{childList:!0,subtree:!0}),window.PF&&"function"==typeof $&&$(document).on("pfAjaxComplete",a),new MutationObserver((e,t)=>{document.querySelector("#dragmodal .panel-heading")&&(console.log("Modal detectado. Iniciando carga de datos..."),t.disconnect(),d().then(e=>{if(e){let t=document.querySelector(r);if(t)t.innerHTML=Array.isArray(e)&&0!==e.length?l+e.map((e,t)=>`
        <tr tabindex="0" class="ui-datatable-${t%2==0?"odd":"even"}">
            <td width="450">${e.nombre_local}</td>
            <td style="display:none">${e.ccod_local}</td>
        </tr>
    `).join(""):l,console.log("Tabla actualizada exitosamente.");else console.error("Error: No se encontró el cuerpo de la tabla (tbody) con el selector:",r)}}))}).observe(document.body,{childList:!0,subtree:!0})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()})();
//# sourceMappingURL=main.js.map
