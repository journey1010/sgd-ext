(()=>{let e=["asu","dir","correo","coUsuario","sDeAsuM","deAsu","deObsDoc","busAsunto","sBuscAsunto","coUsuariolabel","dePass","txtBusDependencia","deSigla","deCortaDepen"];function t(e){let t=document.getElementById(e);t&&(t.style.textTransform="none")}async function n(e){if(e&&"1"!==e.dataset.filled)try{e.disabled=!0;let t=await fetch("https://sgd-control.regionloreto.gob.pe/api/dependencia/last/co_dependencia",{method:"GET",headers:{Accept:"application/json"}});if(!t.ok)throw Error(`HTTP ${t.status}`);let n=await t.json(),o="string"==typeof n?n:Object.values(n)[0];null!=o&&""!==String(o).trim()&&(e.value=o,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),e.dataset.filled="1")}catch(e){console.error("Error al obtener coDependencia:",e)}finally{e.disabled=!1}}let o="";function a(){let e=document.getElementById("dependenciaBean");if(!e)return!1;let t=e.querySelector("#deDepenPadre"),n=e.querySelector("#coNivel");if(t&&n&&!t.dataset.watched){t.dataset.watched="1";let e=t.value;async function a(){let e=t.value.trim();if(e)try{n.disabled=!0;let t=`https://sgd-control.regionloreto.gob.pe/api/dependencia/nivel/father?des_dep=${encodeURIComponent(e)}`,a=await fetch(t,{headers:{Accept:"application/json"}});if(!a.ok)throw Error(`HTTP ${a.status}`);let c=await a.json(),i="";"number"==typeof c||"string"==typeof c?i=c:c&&"object"==typeof c&&(i=c.nivel??c.coNivel??Object.values(c)[0]??""),null!=i&&""!==String(i).trim()&&(n.value=i,o=i,["input","change"].forEach(e=>n.dispatchEvent(new Event(e,{bubbles:!0}))),console.log(`\u{2705} coNivel autocompletado con: ${i}`))}catch(e){console.error("❌ Error al obtener coNivel:",e)}finally{n.disabled=!1}}return t.addEventListener("change",()=>{e=t.value,a()}),setInterval(()=>{t.value!==e&&(e=t.value,a())},500),o&&!n.value&&(n.value=o,["input","change"].forEach(e=>n.dispatchEvent(new Event(e,{bubbles:!0})))),!0}return!1}function c(){console.log("Extensión iniciada."),e.forEach(t),new MutationObserver(()=>{e.forEach(t)}).observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("paste",function(e){if(e.defaultPrevented){let t=(e.clipboardData||window.clipboardData).getData("text");if(t){let e=document.activeElement;e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)&&(e.value+=t)}}e.stopPropagation()},!0),document.addEventListener("keydown",function(e){e.ctrlKey&&"v"===e.key&&e.stopPropagation()},!0),new MutationObserver(()=>{let e=document.querySelector("form#dependenciaBean"),t=document.querySelector("input#coDependencia");e&&e.action.includes("/sgd/4.7/srTablaConfiguracion.do?accion=goNewAdminUO")&&t&&!t.dataset.watched&&(t.dataset.watched="1",n(t))}).observe(document.body,{childList:!0,subtree:!0}),a()||new MutationObserver(a).observe(document.body,{childList:!0,subtree:!0}),window.PF&&"function"==typeof $&&$(document).on("pfAjaxComplete",a)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()})();
//# sourceMappingURL=main.js.map
